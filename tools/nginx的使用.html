<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>nginxçš„ä½¿ç”¨ | è®°å½•</title>
    <meta name="description" content="è®°è·¯">
    <link rel="stylesheet" href="/assets/style.7ae511c0.css">
    <link rel="modulepreload" href="/assets/app.dbd27a4d.js">
    <link rel="modulepreload" href="/assets/tools_nginxçš„ä½¿ç”¨.md.b929f71c.lean.js">
    
    <meta name="twitter:title" content="nginxçš„ä½¿ç”¨ | è®°å½•">
  <meta property="og:title" content="nginxçš„ä½¿ç”¨ | è®°å½•">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-675d8756><div class="sidebar-button" data-v-675d8756><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/" aria-label="è®°å½•, back to home" data-v-675d8756 data-v-cc01ef16><!----> è®°å½•</a><div class="flex-grow" data-v-675d8756></div><div class="nav" data-v-675d8756><nav class="nav-links" data-v-675d8756 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/index" data-v-b8818f8c>ğŸ  é¦–é¡µ <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/more/docs" data-v-b8818f8c>ğŸ“… å½’æ¡£ <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/more/tags" data-v-b8818f8c>ğŸ“‚ åˆ†ç±» <!----></a></div></div><!--]--><!----><!----></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-83e92a68><nav class="nav-links nav" data-v-83e92a68 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/index" data-v-b8818f8c>ğŸ  é¦–é¡µ <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/more/docs" data-v-b8818f8c>ğŸ“… å½’æ¡£ <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/more/tags" data-v-b8818f8c>ğŸ“‚ åˆ†ç±» <!----></a></div></div><!--]--><!----><!----></nav><!--[--><!--]--><ul class="sidebar-links" data-v-83e92a68><!--[--><li class="sidebar-link"><p class="sidebar-link-item">HTML</p><!----></li><li class="sidebar-link"><p class="sidebar-link-item">CSS</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/css/csså†·é—¨è®°å½•">csså¸¸ç”¨æ ·å¼</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">JavaScript</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/javascript/nodeJs">nodeJsçš„ä½¿ç”¨</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Vue</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/Vue.jsè®¾è®¡ä¸å®ç°">Vue.jsè®¾è®¡ä¸å®ç°è¯»ä¹¦ç¬”è®°</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">å·¥å…·</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/tools/element-uiä¸å¸¸è§„ç”¨æ³•">element-uiè‡ªå®šä¹‰ä¿®æ”¹</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/tools/gitå†·é—¨è®°å½•">gitçš„ä½¿ç”¨</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/tools/RESTfulé£æ ¼">Restful</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/tools/uniapp">uni-appé—®é¢˜è®°å½•</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item active" href="/tools/nginxçš„ä½¿ç”¨">nginxçš„ä½¿ç”¨</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#macå®‰è£…">macå®‰è£…</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#wslå®‰è£…ï¼ˆubuntuï¼‰">WSLå®‰è£…ï¼ˆubuntuï¼‰</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/tools/linuxå¸¸ç”¨å‘½ä»¤">linuxå¸¸ç”¨å‘½ä»¤</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/tools/webpackçš„ä½¿ç”¨">webpackçš„ä½¿ç”¨</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">å…¶ä»–</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/other/frontmatter">Restful</a><!----></li></ul></li><!--]--></ul><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><h1 id="å®‰è£…" tabindex="-1">å®‰è£… <a class="header-anchor" href="#å®‰è£…" aria-hidden="true">#</a></h1><h2 id="macå®‰è£…" tabindex="-1">macå®‰è£… <a class="header-anchor" href="#macå®‰è£…" aria-hidden="true">#</a></h2><ol><li><p>ç›´æ¥åœ¨ç»ˆç«¯æ‰§è¡Œ<code>brew install nginx</code></p></li><li><p>å®‰è£…å®Œæˆåæ‰§è¡Œ<code>brew info nginx</code>æŸ¥çœ‹ä¸€ä¸‹nginxçš„ä¿¡æ¯</p><details class="details custom-block"><div class="language-shell line-numbers-mode"><pre><code>nginx: stable <span class="token number">1.21</span>.0 <span class="token punctuation">(</span>bottled<span class="token punctuation">)</span>, HEAD
HTTP<span class="token punctuation">(</span>S<span class="token punctuation">)</span> server and reverse proxy, and IMAP/POP3 proxy server
https://nginx.org/
/usr/local/Cellar/nginx/1.21.0 <span class="token punctuation">(</span><span class="token number">25</span> files, <span class="token number">2</span>.2MB<span class="token punctuation">)</span> *   <span class="token comment">#nginxçš„å®‰è£…ä½ç½®</span>
  Poured from bottle on <span class="token number">2022</span>-04-11 at <span class="token number">17</span>:57:39
From: https://github.com/Homebrew/homebrew-core/blob/HEAD/Formula/nginx.rb
License: BSD-2-Clause
<span class="token operator">==</span><span class="token operator">&gt;</span> Dependencies
Required: openssl@1.1 âœ”, pcre âœ”
<span class="token operator">==</span><span class="token operator">&gt;</span> Options
--HEAD
	Install HEAD version
<span class="token operator">==</span><span class="token operator">&gt;</span> Caveats
Docroot is: /usr/local/var/www     <span class="token comment"># æ ¹ç›®å½•</span>

The default port has been <span class="token builtin class-name">set</span> <span class="token keyword">in</span> /usr/local/etc/nginx/nginx.conf to <span class="token number">8080</span> so that   <span class="token comment"># nginxçš„é…ç½®æ–‡ä»¶ä½ç½®ä»¥åŠé»˜è®¤ç«¯å£å·</span>
nginx can run without sudo.

nginx will load all files <span class="token keyword">in</span> /usr/local/etc/nginx/servers/.

To start nginx now and restart at login:
  brew services start nginx
Or, <span class="token keyword">if</span> you don&#39;t want/need a background <span class="token function">service</span> you can just run:
  nginx
<span class="token operator">==</span><span class="token operator">&gt;</span> Analytics
install: <span class="token number">38,401</span> <span class="token punctuation">(</span><span class="token number">30</span> days<span class="token punctuation">)</span>, <span class="token number">123,932</span> <span class="token punctuation">(</span><span class="token number">90</span> days<span class="token punctuation">)</span>, <span class="token number">486,135</span> <span class="token punctuation">(</span><span class="token number">365</span> days<span class="token punctuation">)</span>
install-on-request: <span class="token number">38,319</span> <span class="token punctuation">(</span><span class="token number">30</span> days<span class="token punctuation">)</span>, <span class="token number">123,724</span> <span class="token punctuation">(</span><span class="token number">90</span> days<span class="token punctuation">)</span>, <span class="token number">485,137</span> <span class="token punctuation">(</span><span class="token number">365</span> days<span class="token punctuation">)</span>
build-error: <span class="token number">24</span> <span class="token punctuation">(</span><span class="token number">30</span> days<span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div></details></li><li><p>æ‰§è¡Œ<code>nginx -V</code>èƒ½å¤Ÿçœ‹åˆ°nginxç›¸å…³çš„ä¿¡æ¯ï¼Œå¦‚æ—¥å¿—å­˜æ”¾ç›®å½•ç­‰</p></li></ol><h2 id="wslå®‰è£…ï¼ˆubuntuï¼‰" tabindex="-1">WSLå®‰è£…ï¼ˆubuntuï¼‰ <a class="header-anchor" href="#wslå®‰è£…ï¼ˆubuntuï¼‰" aria-hidden="true">#</a></h2><ol><li>å…ˆæ‰§è¡Œ<code>apt list | grep nginx</code> çœ‹ä¸€ä¸‹</li><li>æ‰§è¡Œ<code>sudo apt install nginx</code></li><li>å®Œæˆåæ‰§è¡Œ<code>nginx -v</code>æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯</li><li>æ‰§è¡Œ<code>dpkg -S nginx</code>æŸ¥çœ‹nginxçš„å®‰è£…ä½ç½®</li></ol><h1 id="ä½¿ç”¨" tabindex="-1">ä½¿ç”¨ <a class="header-anchor" href="#ä½¿ç”¨" aria-hidden="true">#</a></h1><blockquote><p>ä¸»è¦å…³æ³¨çš„æ–‡ä»¶å¤¹æœ‰ä¸¤ä¸ªï¼š</p><ol><li><code>/etc/nginx/conf.d/</code> æ–‡ä»¶å¤¹ï¼Œæ˜¯æˆ‘ä»¬è¿›è¡Œå­é…ç½®çš„é…ç½®é¡¹å­˜æ”¾å¤„ï¼Œ<code>/etc/nginx/nginx.conf</code> ä¸»é…ç½®æ–‡ä»¶ä¼šé»˜è®¤æŠŠè¿™ä¸ªæ–‡ä»¶å¤¹ä¸­æ‰€æœ‰å­é…ç½®é¡¹éƒ½å¼•å…¥ï¼›</li><li><code>/usr/share/nginx/html/</code> æ–‡ä»¶å¤¹ï¼Œé€šå¸¸é™æ€æ–‡ä»¶éƒ½æ”¾åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ï¼Œä¹Ÿå¯ä»¥æ ¹æ®ä½ è‡ªå·±çš„ä¹ æƒ¯æ”¾å…¶ä»–åœ°æ–¹ï¼›</li></ol></blockquote><ol><li><p>æ‰§è¡Œ<code>sudo service nginx start</code>å¯åŠ¨nginx</p></li><li><p>å¯åŠ¨æˆåŠŸååœ¨æµè§ˆå™¨ä¸­è®¿é—®127.0.0.1å°±å¯ä»¥çœ‹åˆ°nginxçš„æ¬¢è¿é¡µé¢</p></li><li><p>nginxçš„å¸¸ç”¨æ“ä½œå‘½ä»¤</p><blockquote><p>nginx -s reload # å‘ä¸»è¿›ç¨‹å‘é€ä¿¡å·ï¼Œé‡æ–°åŠ è½½é…ç½®æ–‡ä»¶ï¼Œçƒ­é‡å¯ nginx -s reopen # é‡å¯ Nginx nginx -s stop # å¿«é€Ÿå…³é—­ nginx -s quit # ç­‰å¾…å·¥ä½œè¿›ç¨‹å¤„ç†å®Œæˆåå…³é—­ nginx -T # æŸ¥çœ‹å½“å‰ Nginx æœ€ç»ˆçš„é…ç½® nginx -t -c &lt;é…ç½®è·¯å¾„&gt; # æ£€æŸ¥é…ç½®æ˜¯å¦æœ‰é—®é¢˜ï¼Œå¦‚æœå·²ç»åœ¨é…ç½®ç›®å½•ï¼Œåˆ™ä¸éœ€è¦-c</p></blockquote></li><li><p>nginxé…ç½®è¯­æ³•</p><blockquote><p>main # å…¨å±€é…ç½®ï¼Œå¯¹å…¨å±€ç”Ÿæ•ˆ â”œâ”€â”€ events # é…ç½®å½±å“ Nginx æœåŠ¡å™¨æˆ–ä¸ç”¨æˆ·çš„ç½‘ç»œè¿æ¥ â”œâ”€â”€ http # é…ç½®ä»£ç†ï¼Œç¼“å­˜ï¼Œæ—¥å¿—å®šä¹‰ç­‰ç»å¤§å¤šæ•°åŠŸèƒ½å’Œç¬¬ä¸‰æ–¹æ¨¡å—çš„é…ç½® â”‚ â”œâ”€â”€ upstream # é…ç½®åç«¯æœåŠ¡å™¨å…·ä½“åœ°å€ï¼Œè´Ÿè½½å‡è¡¡é…ç½®ä¸å¯æˆ–ç¼ºçš„éƒ¨åˆ† â”‚ â”œâ”€â”€ server # é…ç½®è™šæ‹Ÿä¸»æœºçš„ç›¸å…³å‚æ•°ï¼Œä¸€ä¸ª http å—ä¸­å¯ä»¥æœ‰å¤šä¸ª server å— â”‚ â”œâ”€â”€ server â”‚ â”‚ â”œâ”€â”€ location # server å—å¯ä»¥åŒ…å«å¤šä¸ª location å—ï¼Œlocation æŒ‡ä»¤ç”¨äºåŒ¹é… uri â”‚ â”‚ â”œâ”€â”€ location â”‚ â”‚ â””â”€â”€ ... â”‚ â””â”€â”€ ... â””â”€â”€ ...</p></blockquote><p>ä¸€ä¸ª Nginx é…ç½®æ–‡ä»¶çš„ç»“æ„å°±åƒ <code>nginx.conf</code> æ˜¾ç¤ºçš„é‚£æ ·ï¼Œé…ç½®æ–‡ä»¶çš„è¯­æ³•è§„åˆ™ï¼š</p><ol><li>é…ç½®æ–‡ä»¶ç”±æŒ‡ä»¤ä¸æŒ‡ä»¤å—æ„æˆï¼›</li><li>æ¯æ¡æŒ‡ä»¤ä»¥ <code>;</code> åˆ†å·ç»“å°¾ï¼ŒæŒ‡ä»¤ä¸å‚æ•°é—´ä»¥ç©ºæ ¼ç¬¦å·åˆ†éš”ï¼›</li><li>æŒ‡ä»¤å—ä»¥ <code>{}</code> å¤§æ‹¬å·å°†å¤šæ¡æŒ‡ä»¤ç»„ç»‡åœ¨ä¸€èµ·ï¼›</li><li><code>include</code> è¯­å¥å…è®¸ç»„åˆå¤šä¸ªé…ç½®æ–‡ä»¶ä»¥æå‡å¯ç»´æŠ¤æ€§ï¼›</li><li>ä½¿ç”¨ <code>#</code> ç¬¦å·æ·»åŠ æ³¨é‡Šï¼Œæé«˜å¯è¯»æ€§ï¼›</li><li>ä½¿ç”¨ <code>$</code> ç¬¦å·ä½¿ç”¨å˜é‡ï¼›</li><li>éƒ¨åˆ†æŒ‡ä»¤çš„å‚æ•°æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ï¼›</li></ol></li></ol><h1 id="å…¸å‹é…ç½®" tabindex="-1">å…¸å‹é…ç½® <a class="header-anchor" href="#å…¸å‹é…ç½®" aria-hidden="true">#</a></h1><details class="details custom-block"><div class="language-shell line-numbers-mode"><pre><code>user  nginx<span class="token punctuation">;</span>                        <span class="token comment"># è¿è¡Œç”¨æˆ·ï¼Œé»˜è®¤å³æ˜¯nginxï¼Œå¯ä»¥ä¸è¿›è¡Œè®¾ç½®</span>
worker_processes  <span class="token number">1</span><span class="token punctuation">;</span>                <span class="token comment"># Nginx è¿›ç¨‹æ•°ï¼Œä¸€èˆ¬è®¾ç½®ä¸ºå’Œ CPU æ ¸æ•°ä¸€æ ·</span>
error_log  /var/log/nginx/error.log warn<span class="token punctuation">;</span>   <span class="token comment"># Nginx çš„é”™è¯¯æ—¥å¿—å­˜æ”¾ç›®å½•</span>
pid        /var/run/nginx.pid<span class="token punctuation">;</span>      <span class="token comment"># Nginx æœåŠ¡å¯åŠ¨æ—¶çš„ pid å­˜æ”¾ä½ç½®</span>

events <span class="token punctuation">{</span>
    use epoll<span class="token punctuation">;</span>     <span class="token comment"># ä½¿ç”¨epollçš„I/Oæ¨¡å‹(å¦‚æœä½ ä¸çŸ¥é“Nginxè¯¥ä½¿ç”¨å“ªç§è½®è¯¢æ–¹æ³•ï¼Œä¼šè‡ªåŠ¨é€‰æ‹©ä¸€ä¸ªæœ€é€‚åˆä½ æ“ä½œç³»ç»Ÿçš„)</span>
    worker_connections <span class="token number">1024</span><span class="token punctuation">;</span>   <span class="token comment"># æ¯ä¸ªè¿›ç¨‹å…è®¸æœ€å¤§å¹¶å‘æ•°</span>
<span class="token punctuation">}</span>

http <span class="token punctuation">{</span>   <span class="token comment"># é…ç½®ä½¿ç”¨æœ€é¢‘ç¹çš„éƒ¨åˆ†ï¼Œä»£ç†ã€ç¼“å­˜ã€æ—¥å¿—å®šä¹‰ç­‰ç»å¤§å¤šæ•°åŠŸèƒ½å’Œç¬¬ä¸‰æ–¹æ¨¡å—çš„é…ç½®éƒ½åœ¨è¿™é‡Œè®¾ç½®</span>
    <span class="token comment"># è®¾ç½®æ—¥å¿—æ¨¡å¼</span>
    log_format  main  <span class="token string">&#39;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#39;</span>
                      <span class="token string">&#39;$status $body_bytes_sent &quot;$http_referer&quot; &#39;</span>
                      <span class="token string">&#39;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#39;</span><span class="token punctuation">;</span>

    access_log  /var/log/nginx/access.log  main<span class="token punctuation">;</span>   <span class="token comment"># Nginxè®¿é—®æ—¥å¿—å­˜æ”¾ä½ç½®</span>

    sendfile            on<span class="token punctuation">;</span>   <span class="token comment"># å¼€å¯é«˜æ•ˆä¼ è¾“æ¨¡å¼</span>
    tcp_nopush          on<span class="token punctuation">;</span>   <span class="token comment"># å‡å°‘ç½‘ç»œæŠ¥æ–‡æ®µçš„æ•°é‡</span>
    tcp_nodelay         on<span class="token punctuation">;</span>
    keepalive_timeout   <span class="token number">65</span><span class="token punctuation">;</span>   <span class="token comment"># ä¿æŒè¿æ¥çš„æ—¶é—´ï¼Œä¹Ÿå«è¶…æ—¶æ—¶é—´ï¼Œå•ä½ç§’</span>
    types_hash_max_size <span class="token number">2048</span><span class="token punctuation">;</span>

    include             /etc/nginx/mime.types<span class="token punctuation">;</span>      <span class="token comment"># æ–‡ä»¶æ‰©å±•åä¸ç±»å‹æ˜ å°„è¡¨</span>
    default_type        application/octet-stream<span class="token punctuation">;</span>   <span class="token comment"># é»˜è®¤æ–‡ä»¶ç±»å‹</span>

    include /etc/nginx/conf.d/*.conf<span class="token punctuation">;</span>   <span class="token comment"># åŠ è½½å­é…ç½®é¡¹</span>
    
    server <span class="token punctuation">{</span>
    	listen       <span class="token number">80</span><span class="token punctuation">;</span>       <span class="token comment"># é…ç½®ç›‘å¬çš„ç«¯å£</span>
    	server_name  localhost<span class="token punctuation">;</span>    <span class="token comment"># é…ç½®çš„åŸŸå</span>
    	
    	location / <span class="token punctuation">{</span>
    		root   /usr/share/nginx/html<span class="token punctuation">;</span>  <span class="token comment"># ç½‘ç«™æ ¹ç›®å½•</span>
    		index  index.html index.htm<span class="token punctuation">;</span>   <span class="token comment"># é»˜è®¤é¦–é¡µæ–‡ä»¶</span>
    		deny <span class="token number">172.168</span>.22.11<span class="token punctuation">;</span>   <span class="token comment"># ç¦æ­¢è®¿é—®çš„ipåœ°å€ï¼Œå¯ä»¥ä¸ºall</span>
    		allow <span class="token number">172.168</span>.33.44ï¼› <span class="token comment"># å…è®¸è®¿é—®çš„ipåœ°å€ï¼Œå¯ä»¥ä¸ºall</span>
    	<span class="token punctuation">}</span>
    	
    	error_page <span class="token number">500</span> <span class="token number">502</span> <span class="token number">503</span> <span class="token number">504</span> /50x.html<span class="token punctuation">;</span>  <span class="token comment"># é»˜è®¤50xå¯¹åº”çš„è®¿é—®é¡µé¢</span>
    	error_page <span class="token number">400</span> <span class="token number">404</span> error.html<span class="token punctuation">;</span>   <span class="token comment"># åŒä¸Š</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br></div></div></details><p>server å—å¯ä»¥åŒ…å«å¤šä¸ª location å—ï¼Œlocation æŒ‡ä»¤ç”¨äºåŒ¹é… uriï¼Œè¯­æ³•ï¼š</p><div class="language-nginx line-numbers-mode"><pre><code><span class="token directive"><span class="token keyword">location</span> [ = | ~ | ~* | ^~] uri</span> <span class="token punctuation">{</span>
	...
<span class="token punctuation">}</span>
å¤åˆ¶ä»£ç 
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>æŒ‡ä»¤åé¢ï¼š</p><ol><li><code>=</code> ç²¾ç¡®åŒ¹é…è·¯å¾„ï¼Œç”¨äºä¸å«æ­£åˆ™è¡¨è¾¾å¼çš„ uri å‰ï¼Œå¦‚æœåŒ¹é…æˆåŠŸï¼Œä¸å†è¿›è¡Œåç»­çš„æŸ¥æ‰¾ï¼›</li><li><code>^~</code> ç”¨äºä¸å«æ­£åˆ™è¡¨è¾¾å¼çš„ uriï¼› å‰ï¼Œè¡¨ç¤ºå¦‚æœè¯¥ç¬¦å·åé¢çš„å­—ç¬¦æ˜¯æœ€ä½³åŒ¹é…ï¼Œé‡‡ç”¨è¯¥è§„åˆ™ï¼Œä¸å†è¿›è¡Œåç»­çš„æŸ¥æ‰¾ï¼›</li><li><code>~</code> è¡¨ç¤ºç”¨è¯¥ç¬¦å·åé¢çš„æ­£åˆ™å»åŒ¹é…è·¯å¾„ï¼ŒåŒºåˆ†å¤§å°å†™ï¼›</li><li><code>~*</code> è¡¨ç¤ºç”¨è¯¥ç¬¦å·åé¢çš„æ­£åˆ™å»åŒ¹é…è·¯å¾„ï¼Œä¸åŒºåˆ†å¤§å°å†™ã€‚è·Ÿ <code>~</code> ä¼˜å…ˆçº§éƒ½æ¯”è¾ƒä½ï¼Œå¦‚æœ‰å¤šä¸ªlocationçš„æ­£åˆ™èƒ½åŒ¹é…çš„è¯ï¼Œåˆ™ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æœ€é•¿çš„é‚£ä¸ªï¼›</li></ol><p>å¦‚æœ uri åŒ…å«æ­£åˆ™è¡¨è¾¾å¼ï¼Œåˆ™å¿…é¡»è¦æœ‰ <code>~</code> æˆ– <code>~*</code> æ ‡å¿—ã€‚</p><h1 id="nginxå†…ç½®è‡ªå®šä¹‰å˜é‡" tabindex="-1">nginxå†…ç½®è‡ªå®šä¹‰å˜é‡ <a class="header-anchor" href="#nginxå†…ç½®è‡ªå®šä¹‰å˜é‡" aria-hidden="true">#</a></h1><table><thead><tr><th>å˜é‡å</th><th>å®šä¹‰</th></tr></thead><tbody><tr><td>$arg_PARAMETER</td><td>GETè¯·æ±‚ä¸­å˜é‡åPARAMETERå‚æ•°çš„å€¼ã€‚</td></tr><tr><td>$args</td><td>è¿™ä¸ªå˜é‡ç­‰äºGETè¯·æ±‚ä¸­çš„å‚æ•°ã€‚ä¾‹å¦‚ï¼Œfoo=123&amp;bar=blahblah;è¿™ä¸ªå˜é‡åªå¯ä»¥è¢«ä¿®æ”¹</td></tr><tr><td>$binary_remote_addr</td><td>äºŒè¿›åˆ¶ç å½¢å¼çš„å®¢æˆ·ç«¯åœ°å€ã€‚</td></tr><tr><td>$body_bytes_sent</td><td>ä¼ é€é¡µé¢çš„å­—èŠ‚æ•°</td></tr><tr><td>$content_length</td><td>è¯·æ±‚å¤´ä¸­çš„Content-lengthå­—æ®µã€‚</td></tr><tr><td>$content_type</td><td>è¯·æ±‚å¤´ä¸­çš„Content-Typeå­—æ®µã€‚</td></tr><tr><td>$cookie_COOKIE</td><td>cookie COOKIEçš„å€¼ã€‚</td></tr><tr><td>$document_root</td><td>å½“å‰è¯·æ±‚åœ¨rootæŒ‡ä»¤ä¸­æŒ‡å®šçš„å€¼ã€‚</td></tr><tr><td>$document_uri</td><td>ä¸$uriç›¸åŒã€‚</td></tr><tr><td>$host</td><td>è¯·æ±‚ä¸­çš„ä¸»æœºå¤´(Host)å­—æ®µï¼Œå¦‚æœè¯·æ±‚ä¸­çš„ä¸»æœºå¤´ä¸å¯ç”¨æˆ–è€…ç©ºï¼Œåˆ™ä¸ºå¤„ç†è¯·æ±‚çš„serveråç§°(å¤„ç†è¯·æ±‚çš„serverçš„server_nameæŒ‡ä»¤çš„å€¼)ã€‚å€¼ä¸ºå°å†™ï¼Œä¸åŒ…å«ç«¯å£ã€‚</td></tr><tr><td>$hostname</td><td>æœºå™¨åä½¿ç”¨ gethostnameç³»ç»Ÿè°ƒç”¨çš„å€¼</td></tr><tr><td>$http_HEADER</td><td>HTTPè¯·æ±‚å¤´ä¸­çš„å†…å®¹ï¼ŒHEADERä¸ºHTTPè¯·æ±‚ä¸­çš„å†…å®¹è½¬ä¸ºå°å†™ï¼Œ-å˜ä¸º_(ç ´æŠ˜å·å˜ä¸ºä¸‹åˆ’çº¿)ï¼Œä¾‹å¦‚ï¼š$http_user_agent(Uaer-Agentçš„å€¼);</td></tr><tr><td>$http_user_agent</td><td>å®¢æˆ·ç«¯agentä¿¡æ¯;</td></tr><tr><td>$http_cookie</td><td>å®¢æˆ·ç«¯cookieä¿¡æ¯;</td></tr><tr><td>$sent_http_HEADER</td><td>HTTPå“åº”å¤´ä¸­çš„å†…å®¹ï¼ŒHEADERä¸ºHTTPå“åº”ä¸­çš„å†…å®¹è½¬ä¸ºå°å†™ï¼Œ-å˜ä¸º_(ç ´æŠ˜å·å˜ä¸ºä¸‹åˆ’çº¿)ï¼Œä¾‹å¦‚ï¼š $sent_http_cache_control, $sent_http_content_typeâ€¦;</td></tr><tr><td>$is_args</td><td>å¦‚æœ$argsè®¾ç½®ï¼Œå€¼ä¸º&quot;?&quot;ï¼Œå¦åˆ™ä¸º&quot;&quot;ã€‚</td></tr><tr><td>$limit_rate</td><td>è¿™ä¸ªå˜é‡å¯ä»¥é™åˆ¶è¿æ¥é€Ÿç‡ã€‚</td></tr><tr><td>$nginx_version</td><td>å½“å‰è¿è¡Œçš„nginxç‰ˆæœ¬å·ã€‚</td></tr><tr><td>$query_string</td><td>ä¸$argsç›¸åŒã€‚</td></tr><tr><td>$remote_addr</td><td>å®¢æˆ·ç«¯çš„IPåœ°å€ã€‚</td></tr><tr><td>$remote_port</td><td>å®¢æˆ·ç«¯çš„ç«¯å£ã€‚</td></tr><tr><td>$remote_user</td><td>å·²ç»ç»è¿‡Auth Basic ModuleéªŒè¯çš„ç”¨æˆ·åã€‚</td></tr><tr><td>$request_filename</td><td>å½“å‰è¿æ¥è¯·æ±‚çš„æ–‡ä»¶è·¯å¾„ï¼Œç”±rootæˆ–aliasæŒ‡ä»¤ä¸URIè¯·æ±‚ç”Ÿæˆã€‚</td></tr><tr><td>$request_body</td><td>è¿™ä¸ªå˜é‡ï¼ˆ0.7.58+ï¼‰åŒ…å«è¯·æ±‚çš„ä¸»è¦ä¿¡æ¯ã€‚åœ¨ä½¿ç”¨proxy_passæˆ–fastcgi_passæŒ‡ä»¤çš„locationä¸­æ¯”è¾ƒæœ‰æ„ä¹‰ã€‚</td></tr><tr><td>$request_body_file</td><td>å®¢æˆ·ç«¯è¯·æ±‚ä¸»ä½“ä¿¡æ¯çš„ä¸´æ—¶æ–‡ä»¶åã€‚</td></tr><tr><td>$request_completion</td><td>å¦‚æœè¯·æ±‚æˆåŠŸï¼Œè®¾ä¸º&quot;OK&quot;ï¼›å¦‚æœè¯·æ±‚æœªå®Œæˆæˆ–è€…ä¸æ˜¯ä¸€ç³»åˆ—è¯·æ±‚ä¸­æœ€åä¸€éƒ¨åˆ†åˆ™è®¾ä¸ºç©ºã€‚</td></tr><tr><td>$request_method</td><td>è¿™ä¸ªå˜é‡æ˜¯å®¢æˆ·ç«¯è¯·æ±‚çš„åŠ¨ä½œï¼Œé€šå¸¸ä¸ºGETæˆ–POSTã€‚åŒ…æ‹¬0.8.20åŠä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼Œè¿™ä¸ªå˜é‡æ€»ä¸ºmain requestä¸­çš„åŠ¨ä½œï¼Œå¦‚æœå½“å‰è¯·æ±‚æ˜¯ä¸€ä¸ªå­è¯·æ±‚ï¼Œå¹¶ä¸ä½¿ç”¨è¿™ä¸ªå½“å‰è¯·æ±‚çš„åŠ¨ä½œã€‚</td></tr><tr><td>$request_uri</td><td>è¿™ä¸ªå˜é‡ç­‰äºåŒ…å«ä¸€äº›å®¢æˆ·ç«¯è¯·æ±‚å‚æ•°çš„åŸå§‹URIï¼Œå®ƒæ— æ³•ä¿®æ”¹ï¼Œè¯·æŸ¥çœ‹$uriæ›´æ”¹æˆ–é‡å†™URI,åŒ…å«è¯·æ±‚å‚æ•°çš„åŸå§‹URIï¼Œä¸åŒ…å«ä¸»æœºåï¼Œå¦‚ï¼šâ€/foo/bar.php?arg=bazâ€ã€‚</td></tr><tr><td>$scheme</td><td>æ‰€ç”¨çš„åè®®ï¼Œæ¯”å¦‚httpæˆ–è€…æ˜¯httpsï¼Œæ¯”å¦‚<code>rewrite ^(.+)$ $scheme://example.com$1 redirect</code>;</td></tr><tr><td>$server_addr</td><td>æœåŠ¡å™¨åœ°å€ï¼Œåœ¨å®Œæˆä¸€æ¬¡ç³»ç»Ÿè°ƒç”¨åå¯ä»¥ç¡®å®šè¿™ä¸ªå€¼ï¼Œå¦‚æœè¦ç»•å¼€ç³»ç»Ÿè°ƒç”¨ï¼Œåˆ™å¿…é¡»åœ¨listenä¸­æŒ‡å®šåœ°å€å¹¶ä¸”ä½¿ç”¨bindå‚æ•°ã€‚</td></tr><tr><td>$server_name</td><td>æœåŠ¡å™¨åç§°ã€‚</td></tr><tr><td>$server_port</td><td>è¯·æ±‚åˆ°è¾¾æœåŠ¡å™¨çš„ç«¯å£å·ã€‚</td></tr><tr><td>$server_protocol</td><td>è¯·æ±‚ä½¿ç”¨çš„åè®®ï¼Œé€šå¸¸æ˜¯HTTP/1.0æˆ–HTTP/1.1ã€‚</td></tr><tr><td>$uri</td><td>è¯·æ±‚ä¸­çš„å½“å‰URI(ä¸å¸¦è¯·æ±‚å‚æ•°ï¼Œå‚æ•°ä½äºargs)ï¼Œä¸åŒäºæµè§ˆå™¨ä¼ é€’çš„args)ï¼Œä¸åŒäºæµè§ˆå™¨ä¼ é€’çš„args)ï¼Œä¸åŒäºæµè§ˆå™¨ä¼ é€’çš„request_uriçš„å€¼ï¼Œå®ƒå¯ä»¥é€šè¿‡å†…éƒ¨é‡å®šå‘ï¼Œæˆ–è€…ä½¿ç”¨indexæŒ‡ä»¤è¿›è¡Œä¿®æ”¹ã€‚uriä¸åŒ…å«ä¸»æœºåï¼Œå¦‚â€/foo/bar.htmlâ€ã€‚</td></tr></tbody></table></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-07c132fc><div class="edit" data-v-07c132fc><div class="edit-link" data-v-07c132fc data-v-1ed99556><!----></div></div><div class="updated" data-v-07c132fc><p class="last-updated" data-v-07c132fc data-v-abce3432><span class="prefix" data-v-abce3432>Last Updated:</span><span class="datetime" data-v-abce3432></span></p></div></footer><div class="next-and-prev-link" data-v-7eddb2c4 data-v-38ede35f><div class="container" data-v-38ede35f><div class="prev" data-v-38ede35f><a class="link" href="/tools/uniapp" data-v-38ede35f><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-prev" data-v-38ede35f><path d="M19,11H7.4l5.3-5.3c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-7,7c-0.1,0.1-0.2,0.2-0.2,0.3c-0.1,0.2-0.1,0.5,0,0.8c0.1,0.1,0.1,0.2,0.2,0.3l7,7c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.4,13H19c0.6,0,1-0.4,1-1S19.6,11,19,11z"></path></svg><span class="text" data-v-38ede35f>uni-appé—®é¢˜è®°å½•</span></a></div><div class="next" data-v-38ede35f><a class="link" href="/tools/linuxå¸¸ç”¨å‘½ä»¤" data-v-38ede35f><span class="text" data-v-38ede35f>linuxå¸¸ç”¨å‘½ä»¤</span><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-next" data-v-38ede35f><path d="M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"></path></svg></a></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"css_csså†·é—¨è®°å½•.md\":\"9938342b\",\"index.md\":\"94c52714\",\"javascript_nodejs.md\":\"1b9a5a95\",\"more_docs.md\":\"be427d39\",\"more_index.md\":\"4aa46389\",\"more_tags.md\":\"f90634bc\",\"tools_restfulé£æ ¼.md\":\"43745f91\",\"tools_canvaså­¦ä¹ .md\":\"e783264d\",\"tools_element-uiä¸å¸¸è§„ç”¨æ³•.md\":\"577eb22e\",\"tools_gitå†·é—¨è®°å½•.md\":\"fd45268d\",\"tools_linuxå¸¸ç”¨å‘½ä»¤.md\":\"a915ff4a\",\"tools_nginxçš„ä½¿ç”¨.md\":\"b929f71c\",\"tools_uniapp.md\":\"52dc0137\",\"tools_webpackçš„ä½¿ç”¨.md\":\"74eb3557\",\"vue_vue.jsè®¾è®¡ä¸å®ç°.md\":\"42e46a8e\"}")</script>
    <script type="module" async src="/assets/app.dbd27a4d.js"></script>
    
  </body>
</html>